{% extends 'base.html' %}
{% load static i18n %}
{% load thumbnail humanize %}

{% block title %}{% endblock %}

{% block head %}
{% endblock %}

{% block content %}
<!-- Page Content -->
<div class="row">
    <!-- <div class="col-lg-8">
        <div class="row">
            <input type="text" id="testContent"/>
            <button type="button" id="test">Click Me</button>
            <div id="testInfo"></div>
        </div>
    </div>
    </div> -->
    <!-- Post Content Column -->
    <div class="col-lg-8">
        {% if trade_log %}
        {% for trade in trade_log.det %}
        <div class="card mb-4">
            <div class="card-body">
                <div class='row'>
                    <div class="col-lg-10">
                        <h4 class="card-title"><a href="#"><i class="fa fa-chart-line"></i>{{ trade.stock_name }}</a></h4>
                        <h6 class="card-subtitle mb-2 text-muted"><a href="#"><a href="#">{{ trade.stock_code }}</a></h6>
                        <hr/>
                    </div>
                    
                    <div class="col-lg-2">
                        <div class="float-right">
                        {% if trade.direction == 's' %}
                        <td><span class="badge badge-pill badge-success">{% trans '买出' %}</span></td>
                        {% else %}
                        <td><span class="badge badge-pill badge-danger">{% trans '买入' %}</span></td>
                        {% endif %}
                        </div>
                    </div>
                </div>
                <div class='row'>
                    <div class="col-lg-10">
                        <p class="card-text">{{ trade.trade_time }}  <a href="/user/{{trade.trader.id}}/profile">{{trade.trader.username}}</a> {% trans '以' %} {% trans '￥' %} {{ trade.price }} {% trans '交易' %} {{ trade.board_lots }}{% trans '股' %} {% trans '，本次交易投入' %}{% trans '￥' %} {{ trade.cash }}</p>
                        <p class="card-text">{% trans '该股的目标仓位为' %} {{ trade.target_position }} {% trans '股' %} </p>
                        <hr/>
                    </div>
                </div>
                <div class='row'>
                    <div class="col-lg-12">
                        <a href="#" class="card-link"><i class='fa fa-heart' aria-hidden="true"></i></a>
                        <a href="#" class="card-link"><i class='fa fa-share-alt' aria-hidden="true"></i></a>
                        <a href="#" class="card-link">{% trans '查看全部操作' %}</a>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
        {% endif %}
    </div>

    <!-- Sidebar Widgets Column -->
    <div class="col-lg-4">
        <!-- Search Widget -->
        <div class="p-1 my-4">
            <h6>{% trans '搜索' %}</h6>
            <div class="">
                <div class="input-group mb-2 mt-1">
                    <input type="text" class="form-control advancedAutoComplete" id="searchNameOrCode" autocomplete="off" placeholder="{% trans '请输入股票名称或代码' %}">                    
                    <input type="hidden" id="hiddenCode">
                    <input type="hidden" id="hiddenName">
                    <input type="hidden" id="hiddenTscode">
                    <input type="hidden" id="hiddenMarket">
                </div>
            </div>
        </div>

        <!-- Position Widget -->
        <div class="p-1 my-4">
            <h6>{% trans '常用策略' %}</h6>
            <hr/>
            {% if trade_log %}
            {% for s in trade_log.str %}
                <button type="button" class="btn btn-warning"><i class="fa fa-cog">{{ s.name }}</i></button>
            {% endfor %}
            {% endif %}
        </div>

        <!-- Side Widget Following -->
        <div class="p-1 my-4">
            <h6>{% trans '我的自选股' %}</h6>
            <hr/>
            {% if trade_log %}
            {% for f in trade_log.fol %}
                <button type="button" class="btn btn-primary mb-2"><i class="fa fa-bar">{{ f.stock_code.stock_name }}({{ f.stock_code.stock_code }})</i></button>
            {% endfor %}
            {% endif %}
        </div>

       
    </div>

</div>
<!-- /.row -->

</div>
<!-- /.container -->
{% endblock content %}

{% block javascript %}
{{ block.super }}
<script
    src="https://cdn.polyfill.io/v2/polyfill.js?features=default,String.prototype.repeat,Array.prototype.find,Array.prototype.findIndex,Math.trunc,Math.sign"></script>
<script src="https://cdn.jsdelivr.net/npm/luxon@1.19.3"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.0"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@0.2.0"></script>
<script src="{% static 'js/chartjs-chart-financial.v_0_1_1.js' %}" type="text/javascript"></script>
<script src="{% static 'js/prettydate.min.js' %}" type="text/javascript"></script>


<!-- place project specific Javascript in this file -->
<!-- <script src="{% static 'js/charts-utils.js' %}" type="text/javascript"></script> -->
<script src="{% static 'js/dashboard.js' %}" type="text/javascript"></script>
{% endblock javascript %}
